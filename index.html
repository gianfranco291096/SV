<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Invitaci√≥n de San Valent√≠n üíò</title>
  <meta name="description" content="Una invitaci√≥n de San Valent√≠n interactiva y linda." />
  <style>
    :root{
      --bg1:#0b1020;
      --bg2:#2a0f2b;
      --card:#0f172aee;
      --text:#e5e7eb;
      --muted:#cbd5e1;
      --accent:#ff4d6d;
      --accent2:#ffb703;
      --ok:#22c55e;
      --shadow: 0 20px 60px rgba(0,0,0,.35);
      --radius: 24px;
    }

    *{box-sizing:border-box}
    body{
      margin:0;
      min-height:100vh;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, "Noto Sans", "Helvetica Neue", sans-serif;
      color:var(--text);
      background: radial-gradient(1200px 800px at 20% 20%, #ff4d6d22, transparent 55%),
                  radial-gradient(900px 700px at 85% 30%, #ffb70322, transparent 55%),
                  linear-gradient(160deg, var(--bg1), var(--bg2));
      overflow-x:hidden;
    }

    .wrap{
      max-width: 980px;
      margin: 0 auto;
      padding: 32px 18px 60px;
      display:grid;
      gap:18px;
      place-items:center;
    }

    .topbar{
      width:100%;
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:12px;
      opacity:.92;
    }
    .badge{
      padding:10px 14px;
      border:1px solid rgba(255,255,255,.14);
      border-radius:999px;
      background: rgba(255,255,255,.06);
      backdrop-filter: blur(10px);
      box-shadow: 0 10px 30px rgba(0,0,0,.18);
      font-size: 13px;
      letter-spacing:.2px;
      display:flex; align-items:center; gap:8px;
    }
    .badge b{color:#fff}
    .chip{
      cursor:pointer;
      user-select:none;
      padding:10px 14px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.06);
      backdrop-filter: blur(10px);
      font-size: 13px;
      transition: transform .2s ease, background .2s ease;
    }
    .chip:hover{transform: translateY(-1px); background: rgba(255,255,255,.09);}

    .card{
      width:100%;
      border-radius: var(--radius);
      background: var(--card);
      border:1px solid rgba(255,255,255,.12);
      box-shadow: var(--shadow);
      overflow:hidden;
      position:relative;
    }

    .hero{
      padding: 34px 26px 22px;
      display:grid;
      gap:16px;
      position:relative;
    }

    .glow{
      position:absolute;
      inset:-200px -200px auto auto;
      width:420px;
      height:420px;
      background: radial-gradient(circle at 40% 40%, #ff4d6d55, transparent 65%);
      filter: blur(2px);
      pointer-events:none;
      transform: rotate(15deg);
    }

    .title{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:14px;
      flex-wrap:wrap;
    }
    h1{
      margin:0;
      font-size: clamp(28px, 4vw, 44px);
      line-height:1.05;
      letter-spacing:-.5px;
    }
    .sub{
      margin:0;
      color: var(--muted);
      font-size: 15px;
      max-width: 62ch;
    }

    .heart{
      width: 54px;
      height: 54px;
      border-radius: 18px;
      background: linear-gradient(135deg, #ff4d6d, #ff8fab);
      display:grid;
      place-items:center;
      box-shadow: 0 18px 40px rgba(255,77,109,.25);
      transform: translateY(2px);
    }
    .heart svg{filter: drop-shadow(0 6px 10px rgba(0,0,0,.25));}

    .details{
      display:grid;
      grid-template-columns: repeat(3, minmax(0,1fr));
      gap:12px;
      margin-top: 6px;
    }
    .tile{
      border-radius: 18px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.05);
      padding: 14px 14px 12px;
      display:grid;
      gap:6px;
      min-height: 76px;
    }
    .tile small{
      color: rgba(229,231,235,.75);
      font-size: 12px;
      letter-spacing:.2px;
    }
    .tile div{
      font-weight: 650;
      font-size: 14px;
    }

    .cta{
      padding: 0 26px 26px;
      display:grid;
      gap:12px;
    }

    .question{
      font-size: clamp(18px, 2.2vw, 22px);
      margin: 10px 0 2px;
      font-weight: 700;
    }

    .actions{
      display:flex;
      gap:12px;
      flex-wrap:wrap;
      align-items:center;
    }

    button{
      border:0;
      cursor:pointer;
      padding: 12px 16px;
      border-radius: 16px;
      font-weight: 700;
      font-size: 14px;
      letter-spacing:.2px;
      transition: transform .15s ease, filter .15s ease, box-shadow .15s ease;
    }
    button:active{transform: translateY(1px) scale(.99);}
    .yes{
      background: linear-gradient(135deg, var(--ok), #86efac);
      box-shadow: 0 14px 28px rgba(34,197,94,.22);
      color:#06210f;
    }
    .no{
      background: rgba(255,255,255,.10);
      border: 1px solid rgba(255,255,255,.18);
      color: var(--text);
      backdrop-filter: blur(8px);
    }
    .ghost{
      background: transparent;
      border:1px dashed rgba(255,255,255,.22);
      color: rgba(229,231,235,.9);
    }
    button:hover{transform: translateY(-1px); filter: brightness(1.02);}

    .note{
      color: rgba(229,231,235,.75);
      font-size: 13px;
      margin:0;
    }

    .footer{
      margin-top: 18px;
      width:100%;
      text-align:center;
      color: rgba(229,231,235,.55);
      font-size: 12px;
    }

    /* Modal */
    .modal{
      position: fixed;
      inset: 0;
      display:none;
      place-items:center;
      background: rgba(2,6,23,.72);
      backdrop-filter: blur(6px);
      padding: 18px;
      z-index: 30;
    }
    .modal.open{display:grid;}
    .modal-card{
      max-width: 560px;
      width:100%;
      border-radius: 24px;
      background: rgba(15,23,42,.96);
      border:1px solid rgba(255,255,255,.14);
      box-shadow: 0 20px 70px rgba(0,0,0,.45);
      padding: 22px;
      position:relative;
      overflow:hidden;
    }
    .modal-card h2{margin:0 0 6px; font-size: 22px;}
    .modal-card p{margin:0; color: rgba(229,231,235,.78); line-height:1.55;}
    .modal-actions{margin-top: 14px; display:flex; gap:10px; flex-wrap:wrap;}
    .x{
      position:absolute;
      top: 12px;
      right: 12px;
      width: 38px; height: 38px;
      border-radius: 14px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.06);
      color: rgba(255,255,255,.85);
      font-weight:900;
    }

    /* Confetti */
    #confetti{
      position: fixed;
      inset: 0;
      pointer-events:none;
      z-index: 40;
    }

    /* Responsive */
    @media (max-width: 760px){
      .details{grid-template-columns: 1fr; }
      .heart{width: 50px; height:50px; border-radius:16px;}
      .hero{padding: 28px 18px 18px;}
      .cta{padding: 0 18px 22px;}
    }
  </style>
</head>

<body>
  <canvas id="confetti"></canvas>

  <div class="wrap">
    <div class="topbar">
      <div class="badge">üíå <span>Invitaci√≥n</span> <b>San Valent√≠n</b></div>
      <!-- <div class="chip" id="btnEditar">‚úèÔ∏è Personalizar</div> -->
    </div>

    <section class="card" id="card">
      <div class="glow"></div>

      <div class="hero">
        <div class="title">
          <div>
            <h1 id="titulo">¬øQuieres ser mi San Valent√≠n? üíò</h1>
            <p class="sub" id="mensaje">
              Tengo un plan simple: pasarla bonito contigo, comer algo rico y quedarnos con una historia que valga la pena contar.
            </p>
          </div>

          <div class="heart" aria-hidden="true" title="amor">
            <svg width="26" height="26" viewBox="0 0 24 24" fill="none">
              <path d="M12 21s-7-4.35-9.33-8.1C.33 9.15 2.1 5.7 5.8 5.2c1.9-.25 3.6.6 4.7 1.9 1.1-1.3 2.8-2.15 4.7-1.9 3.7.5 5.47 3.95 3.13 7.7C19 16.65 12 21 12 21Z"
                fill="white" opacity="0.95"/>
            </svg>
          </div>
        </div>

        <div class="details">
          <div class="tile">
            <small>üìÖ Fecha</small>
            <div id="fecha">14 de febrero</div>
          </div>
          <div class="tile">
            <small>üïó Hora</small>
            <div id="hora">7:30 p. m.</div>
          </div>
          <div class="tile">
            <small>üìç Lugar</small>
            <div id="lugar">Donde t√∫ elijas</div>
          </div>
        </div>
      </div>

      <div class="cta">
        <div class="question" id="pregunta">Entonces‚Ä¶ ¬øaceptas esta cita? üò≥</div>

        <div class="actions">
          <button class="yes" id="btnSi">S√≠, obvio üíö</button>
          <button class="no" id="btnNo">No üò∂</button>
          <!-- <button class="ghost" id="btnLink">Copiar link (demo)</button> -->
        </div>

        <!-- <p class="note" id="nota">
          Tip: toca ‚ÄúPersonalizar‚Äù para poner su nombre, lugar y hora. (El bot√≥n ‚ÄúNo‚Äù es medio t√≠mido üôà)
        </p> -->
      </div>
    </section>

    <div class="footer">Hecho con üíñ</div>
  </div>

  <!-- Modal Personalizar -->
  <div class="modal" id="modal">
    <div class="modal-card">
      <button class="x" id="closeModal" aria-label="Cerrar">‚úï</button>
      <h2>Personalizar invitaci√≥n</h2>
      <p>Escribe tus datos y se actualizar√° en vivo.</p>

      <div style="display:grid; gap:10px; margin-top:14px;">
        <label style="display:grid; gap:6px;">
          <span style="font-size:12px; color:rgba(229,231,235,.75);">T√≠tulo</span>
          <input id="iTitulo" placeholder="¬øQuieres ser mi San Valent√≠n? üíò"
                 style="padding:12px 12px;border-radius:14px;border:1px solid rgba(255,255,255,.14);background:rgba(255,255,255,.06);color:var(--text);outline:none;" />
        </label>

        <label style="display:grid; gap:6px;">
          <span style="font-size:12px; color:rgba(229,231,235,.75);">Mensaje</span>
          <textarea id="iMensaje" rows="3"
                    style="padding:12px 12px;border-radius:14px;border:1px solid rgba(255,255,255,.14);background:rgba(255,255,255,.06);color:var(--text);outline:none;resize:vertical;"
                    placeholder="Escribe algo bonito..."></textarea>
        </label>

        <div style="display:grid; grid-template-columns:1fr 1fr; gap:10px;">
          <label style="display:grid; gap:6px;">
            <span style="font-size:12px; color:rgba(229,231,235,.75);">Fecha</span>
            <input id="iFecha" placeholder="14 de febrero"
                   style="padding:12px 12px;border-radius:14px;border:1px solid rgba(255,255,255,.14);background:rgba(255,255,255,.06);color:var(--text);outline:none;" />
          </label>

          <label style="display:grid; gap:6px;">
            <span style="font-size:12px; color:rgba(229,231,235,.75);">Hora</span>
            <input id="iHora" placeholder="8:00 p. m."
                   style="padding:12px 12px;border-radius:14px;border:1px solid rgba(255,255,255,.14);background:rgba(255,255,255,.06);color:var(--text);outline:none;" />
          </label>
        </div>

        <label style="display:grid; gap:6px;">
          <span style="font-size:12px; color:rgba(229,231,235,.75);">Lugar</span>
          <input id="iLugar" placeholder="Donde t√∫ elijas"
                 style="padding:12px 12px;border-radius:14px;border:1px solid rgba(255,255,255,.14);background:rgba(255,255,255,.06);color:var(--text);outline:none;" />
        </label>
      </div>

      <div class="modal-actions">
        <button class="yes" id="btnGuardar">Listo üíö</button>
        <button class="no" id="btnReset">Restaurar</button>
      </div>
    </div>
  </div>

  <script>
    // ====== Elementos ======
    const $ = (id) => document.getElementById(id);

    const titulo = $("titulo");
    const mensaje = $("mensaje");
    const fecha = $("fecha");
    const hora  = $("hora");
    const lugar = $("lugar");

    const modal = $("modal");

    // Inputs
    const iTitulo = $("iTitulo");
    const iMensaje = $("iMensaje");
    const iFecha = $("iFecha");
    const iHora = $("iHora");
    const iLugar = $("iLugar");

    // Botones
    $("btnEditar").addEventListener("click", () => {
      // precargar valores actuales
      iTitulo.value = titulo.textContent.trim();
      iMensaje.value = mensaje.textContent.trim();
      iFecha.value = fecha.textContent.trim();
      iHora.value = hora.textContent.trim();
      iLugar.value = lugar.textContent.trim();
      modal.classList.add("open");
    });

    $("closeModal").addEventListener("click", () => modal.classList.remove("open"));
    modal.addEventListener("click", (e) => { if (e.target === modal) modal.classList.remove("open"); });

    // Actualizaci√≥n en vivo
    const bindLive = () => {
      if (iTitulo.value) titulo.textContent = iTitulo.value;
      if (iMensaje.value) mensaje.textContent = iMensaje.value;
      if (iFecha.value) fecha.textContent = iFecha.value;
      if (iHora.value) hora.textContent = iHora.value;
      if (iLugar.value) lugar.textContent = iLugar.value;
    };
    [iTitulo, iMensaje, iFecha, iHora, iLugar].forEach(el => {
      el.addEventListener("input", bindLive);
    });

    $("btnGuardar").addEventListener("click", () => modal.classList.remove("open"));

    $("btnReset").addEventListener("click", () => {
      titulo.textContent = "¬øQuieres ser mi San Valent√≠n? üíò";
      mensaje.textContent = "Tengo un plan simple: pasarla bonito contigo, comer algo rico y quedarnos con una historia que valga la pena contar.";
      fecha.textContent = "14 de febrero";
      hora.textContent  = "8:00 p. m.";
      lugar.textContent = "Donde t√∫ elijas";
      iTitulo.value = titulo.textContent;
      iMensaje.value = mensaje.textContent;
      iFecha.value = fecha.textContent;
      iHora.value = hora.textContent;
      iLugar.value = lugar.textContent;
    });

    // ====== Bot√≥n S√≠: confetti + modal de √©xito ======
    $("btnSi").addEventListener("click", () => {
      startConfetti(160);
      openSuccess();
    });

    function openSuccess(){
      const box = document.createElement("div");
      box.className = "modal open";
      box.innerHTML = `
        <div class="modal-card">
          <button class="x" aria-label="Cerrar">‚úï</button>
          <h2>¬°Sab√≠a que dir√≠as que s√≠! ü•πüíñ</h2>
          <p>Prometo: buen plan, buena conversaci√≥n y cero estr√©s. ¬øTe escribo para coordinar?</p>
          <div class="modal-actions">
            <button class="yes">S√≠, escr√≠beme üì≤</button>
            <button class="no">Luego lo vemos üòÑ</button>
          </div>
        </div>
      `;
      document.body.appendChild(box);

      const close = () => { box.remove(); };
      box.addEventListener("click", (e) => { if (e.target === box) close(); });
      box.querySelector(".x").addEventListener("click", close);
      box.querySelector(".yes").addEventListener("click", close);
      box.querySelector(".no").addEventListener("click", close);
    }

    // ====== Bot√≥n No: escurridizo ======
    const btnNo = $("btnNo");
    btnNo.addEventListener("mouseenter", () => moveNoButton());
    btnNo.addEventListener("click", () => {
      // si logra hacer click, igual se pone rom√°ntico üòÇ
      startConfetti(70);
      alert("Ok üòÖ pero igual te debo un chocolate üç´");
    });

    function moveNoButton(){
      const card = $("card");
      const rect = card.getBoundingClientRect();
      const b = btnNo.getBoundingClientRect();

      // rango dentro de la tarjeta
      const pad = 14;
      const maxX = rect.width - b.width - pad;
      const maxY = rect.height - b.height - pad;

      let x = Math.random() * maxX + pad;
      let y = Math.random() * maxY + pad;

      // evitar que quede encima del bot√≥n S√≠ (zona inferior izquierda)
      if (y > rect.height - 140 && x < 220) {
        x = Math.min(maxX, x + 240);
        y = Math.max(pad, y - 110);
      }

      btnNo.style.position = "absolute";
      btnNo.style.left = x + "px";
      btnNo.style.top  = y + "px";
      btnNo.style.transform = "translateZ(0)";
      btnNo.style.zIndex = "5";
      card.style.position = "relative";
    }

    // ====== Copiar link (demo con par√°metros en URL) ======
    $("btnLink").addEventListener("click", async () => {
      const params = new URLSearchParams({
        t: titulo.textContent,
        m: mensaje.textContent,
        f: fecha.textContent,
        h: hora.textContent,
        l: lugar.textContent
      });

      const url = location.origin + location.pathname + "?" + params.toString();
      try{
        await navigator.clipboard.writeText(url);
        toast("Link copiado ‚úÖ");
      } catch(e){
        prompt("Copia este link:", url);
      }
    });

    function toast(text){
      const el = document.createElement("div");
      el.textContent = text;
      el.style.position = "fixed";
      el.style.left = "50%";
      el.style.bottom = "18px";
      el.style.transform = "translateX(-50%)";
      el.style.padding = "10px 14px";
      el.style.borderRadius = "999px";
      el.style.background = "rgba(15,23,42,.92)";
      el.style.border = "1px solid rgba(255,255,255,.16)";
      el.style.color = "rgba(229,231,235,.92)";
      el.style.boxShadow = "0 18px 55px rgba(0,0,0,.35)";
      el.style.zIndex = "60";
      document.body.appendChild(el);
      setTimeout(() => el.remove(), 1700);
    }

    // ====== Leer par√°metros de URL (para compartir) ======
    (function hydrateFromUrl(){
      const p = new URLSearchParams(location.search);
      const t = p.get("t"), m = p.get("m"), f = p.get("f"), h = p.get("h"), l = p.get("l");
      if (t) titulo.textContent = t;
      if (m) mensaje.textContent = m;
      if (f) fecha.textContent = f;
      if (h) hora.textContent = h;
      if (l) lugar.textContent = l;
    })();

    // ====== Confetti (canvas) ======
    const canvas = document.getElementById("confetti");
    const ctx = canvas.getContext("2d");
    let W, H, particles = [], running = false;

    function resize(){
      W = canvas.width = window.innerWidth;
      H = canvas.height = window.innerHeight;
    }
    window.addEventListener("resize", resize);
    resize();

    function startConfetti(count=120){
      // crea part√≠culas
      for (let i=0;i<count;i++){
        particles.push({
          x: Math.random()*W,
          y: -20 - Math.random()*H*0.2,
          r: 3 + Math.random()*4,
          vx: -1.5 + Math.random()*3,
          vy: 2 + Math.random()*4,
          rot: Math.random()*Math.PI,
          vr: -0.15 + Math.random()*0.3,
          alpha: 1
        });
      }
      if (!running){
        running = true;
        requestAnimationFrame(tick);
      }
    }

    function tick(){
      ctx.clearRect(0,0,W,H);
      particles.forEach(p => {
        p.x += p.vx;
        p.y += p.vy;
        p.rot += p.vr;
        p.vy += 0.03;         // gravedad
        p.alpha -= 0.0035;    // desvanecer

        ctx.save();
        ctx.globalAlpha = Math.max(p.alpha, 0);
        ctx.translate(p.x, p.y);
        ctx.rotate(p.rot);

        // 3 tonos sin setear "colores fijos" por CSS; aqu√≠ s√≠ es canvas:
        const pick = Math.random();
        ctx.fillStyle = pick < 0.34 ? "rgba(255,77,109,.95)"
                      : pick < 0.67 ? "rgba(255,183,3,.95)"
                      : "rgba(34,197,94,.95)";
        ctx.fillRect(-p.r, -p.r, p.r*2, p.r*2);
        ctx.restore();
      });

      particles = particles.filter(p => p.y < H+40 && p.alpha > 0);

      if (particles.length > 0){
        requestAnimationFrame(tick);
      } else {
        running = false;
        ctx.clearRect(0,0,W,H);
      }
    }
  </script>
</body>
</html>